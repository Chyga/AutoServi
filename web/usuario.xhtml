<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:o="http://omnifaces.org/ui">
    <h:head>
        <title>Usuario</title>
    </h:head>
    <f:metadata>
        <o:viewParam name="codigo" value="#{usuarioBean.dao.codigo}"/>
        <f:event type="preRenderView" listener="#{usuarioBean.porCodigo()}"/>
    </f:metadata>
    <body>
        <ui:composition template="./principal.xhtml">
            <ui:define name="content">      

                <h:form>
                    <f:event type="preRenderView" listener="#{tipoUsuarioBean.listar(false)}" />
                    <h:panelGrid columns="2">

                        <p:graphicImage library="imagenes" name="usuario_nuevo_logo_1.png"
                                        style="padding: 15px; margin-left: 10em"/>

                        <p:panelGrid columns="6"
                                     styleClass="tabla-usuario-nuevo"
                                     style="margin-left: 10em;">
                            <f:facet name="header">
                                <p:outputLabel value="#{usuarioBean.editando == false ? 'Nuevo Usuario':'Editar Usuario'}"
                                               style="font-size: 30px;text-shadow: 3px 3px 2px #696; color: #666;"
                                               />
                            </f:facet>

                            <p:outputLabel for="txtcodigo" value="Código"/>
                            <p:inputText id="txtcodigo" 
                                         value="#{usuarioBean.dao.codigo}" 
                                         required="true"
                                         readonly="#{usuarioBean.editando == true}"/>
                            <p:message for="txtcodigo" display="icon"/>

                            <h:panelGroup/>
                            <h:panelGroup/>
                            <h:panelGroup/>

                            <p:outputLabel for="txtclave" value="Clave"/>
                            <p:password id="txtclave" 
                                        value="#{usuarioBean.dao.clave}" 
                                        required="#{!usuarioBean.editando}" 
                                        redisplay="true"
                                        feedback="true"
                                        weakLabel="Debil" 
                                        goodLabel="Buena" 
                                        strongLabel="Fuerte" 
                                        promptLabel="Introdusca clave" 
                                        inline="true" 
                                        match="txtclaveconfirmacion" />
                            <p:message for="txtclave" display="icon"/>

                            <p:outputLabel for="txtclaveconfirmacion" 
                                           value="Confirmación"/>
                            <p:password id="txtclaveconfirmacion" 
                                        value="#{usuarioBean.claveconfirmacion}" 
                                        required="#{!usuarioBean.editando}"/>
                            <p:message for="txtclaveconfirmacion" display="icon"/>

                            <p:outputLabel for="txtnombre" value="Nombre"/>
                            <p:inputText id="txtnombre" 
                                         value="#{usuarioBean.dao.nombre}" 
                                         required="true"/>
                            <p:message for="txtnombre" display="icon"/>

                            <p:outputLabel for="txtapellido" value="Apellido"/>
                            <p:inputText id="txtapellido" value="#{usuarioBean.dao.apellido}" required="true"/>
                            <p:message for="txtapellido" display="icon"/>

                            <p:outputLabel for="cbmtipousuario" value="Tipo Usuario"/>
                            <p:selectOneMenu id="cbmtipousuario" 
                                             value="#{usuarioBean.dao.id_tipousuario}">
                                <f:selectItem noSelectionOption="true" itemLabel="Seleccionar" itemValue="#{null}"/>
                                <f:selectItems value="#{tipoUsuarioBean.lista}" 
                                               var="tipoUsuario"
                                               itemLabel="#{tipoUsuario.descripcion}"
                                               itemValue="#{tipoUsuario.id_tipousuario}"/>
                            </p:selectOneMenu>
                            <p:message for="cbmtipousuario" display="icon"/>

                            <p:outputLabel for="cmbestado" value="Estado"/>
                            <p:selectOneMenu id="cmbestado" value="#{usuarioBean.dao.estado}" required="true">
                                <f:selectItem itemLabel="ACTIVO" itemValue="ACTIVO"/>
                                <f:selectItem itemLabel="INACTIVO" itemValue="INACTIVO"/>
                            </p:selectOneMenu>
                            <p:message for="cmbestado" display="icon"/>

                            <h:panelGroup/>
                            <h:panelGroup/>
                            <h:panelGroup/>

                            <f:facet name="footer">
                                <p:commandButton value="Aceptar"
                                                 actionListener="#{usuarioBean.confirmar()}"
                                                 icon="ui-icono-registrar"
                                                 update="@form"/>
                            </f:facet>
                        </p:panelGrid>
                    </h:panelGrid>
                </h:form>


            </ui:define>
        </ui:composition>
    </body>
</html>
