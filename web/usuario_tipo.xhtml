<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Tipo Usuario</title>
        <h:outputStylesheet library="css" name="login.css" rendererType="text/css"/>
    </h:head>
    <body>
        <ui:composition template="./principal.xhtml">
            <ui:define name="content">

                <f:event type="preRenderView" listener="#{tipoUsuarioBean.listar(false)}" />

                <h:form id="formTablaTipoUsuario">

                    <p:commandButton value="Nuevo" 
                                     actionListener="#{tipoUsuarioBean.limpiar}" 
                                     oncomplete="PF('wvTipoUsuario').show();" 
                                     style="margin-left: 135px"
                                     update=":dgtipousuario">

                        <f:setPropertyActionListener 
                            target="#{tipoUsuarioBean.nombreVentana}" 
                            value="Registro"/>
                    </p:commandButton>

                    <p:dataTable rows="10" 
                                 paginator="true"
                                 paginatorPosition="bottom" 
                                 id="tipousuariotabla" 
                                 styleClass="datatable-tam"
                                 value="#{tipoUsuarioBean.lista}" var="tipousuario">

                        <p:column headerText="Acciones" width="70">
                            <p:spacer width="10" height="10"/>
                            <p:commandLink oncomplete="PF('wvTipoUsuario').show();" 
                                           update=":dgtipousuario">
                                <h:graphicImage library="imagenes" 
                                                name="editar.png" 
                                                styleClass="dimension-imagen"/>
                                <f:setPropertyActionListener 
                                    target="#{tipoUsuarioBean.dao}"
                                    value="#{tipousuario}"/>
                                <f:setPropertyActionListener 
                                    target="#{tipoUsuarioBean.nombreVentana}" 
                                    value="Modificar"/>
                            </p:commandLink>

                            <p:spacer width="10" height="10"/>

                            <p:commandLink action="#{tipoUsuarioBean.inactivar()}" update="tipousuariotabla" >

                                <h:graphicImage library="imagenes" 
                                                name="anular.png" 
                                                styleClass="dimension-imagen"/>

                                <f:setPropertyActionListener 
                                    target="#{tipoUsuarioBean.dao}" 
                                    value="#{tiopusuario}"/>

                            </p:commandLink>
                        </p:column>

                        <p:column headerText="Código">
                            <p:outputLabel value="#{tipousuario.codigo}"/>
                        </p:column>

                        <p:column headerText="Descripción">
                            <p:outputLabel value="#{tipousuario.descripcion}"/>
                        </p:column>

                        <p:column headerText="Estado">
                            <p:outputLabel value="#{tipousuario.estado}"/>
                        </p:column>

                    </p:dataTable>

                    <p:confirmDialog message = "¿Eliminar a #{tipousuario.descripcion}?"
                                     header="Eliminar Cliente" 
                                     widgetVar="confirm_cliente">

                        <p:commandButton value="Aceptar"
                                         update=":formTablaTipoUsuario:tipousuariotabla"
                                         oncomplete="confirm_cliente.hide()"
                                         action="#{tipousuarioBean.inactivar()}"/>

                        <p:button value="No" 
                                  onclick="confirm_cliente.hide();
                                          return false;" />

                    </p:confirmDialog>
                </h:form>

                <p:dialog header="Tipo Usuario" 
                          widgetVar="wvTipoUsuario" 
                          id="dgtipousuario" 
                          position="center bottom">

                    <h:form>

                        <p:panel header="#{tipoUsuarioBean.nombreVentana}">

                            <p:panelGrid columns="2">

                                <p:outputLabel for="txtcodigo" value="Código"/>
                                <p:inputText id="txtcodigo" 
                                             value="#{tipoUsuarioBean.dao.codigo}" 
                                             required="true"
                                             readonly="#{tipoUsuarioBean.nombreVentana=='Modificar'}"/>

                                <p:outputLabel for="txtdescripcion" value="Descripción"/>
                                <p:inputText id="txtdescripcion" 
                                             value="#{tipoUsuarioBean.dao.descripcion}" 
                                             required="true"/>

                                <p:outputLabel for="cmbestado" value="Estado"/>
                                <p:selectOneMenu id="cmbestado" value="#{tipoUsuarioBean.dao.estado}" required="true">
                                    <f:selectItem itemLabel="ACTIVO" itemValue="ACTIVO"/>
                                    <f:selectItem itemLabel="INACTIVO" itemValue="INACTIVO"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel header="Permisos">
                            <p:panelGrid columns="4">
                                <p:outputLabel for="cmbventa" value="Venta"/>
                                <p:selectOneMenu id="cmbventa" value="#{tipoUsuarioBean.dao.chkventa}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbcompra" value="Compra"/>
                                <p:selectOneMenu id="cmbcompra" value="#{tipoUsuarioBean.dao.chkcompra}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbusuario" value="Usuario"/>
                                <p:selectOneMenu id="cmbusuario" value="#{tipoUsuarioBean.dao.chkusuario}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbcaja" value="Caja"/>
                                <p:selectOneMenu id="cmbcaja" value="#{tipoUsuarioBean.dao.chkcaja}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbfactura" value="Factura"/>
                                <p:selectOneMenu id="cmbfactura" value="#{tipoUsuarioBean.dao.chkfactura}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbinventario" value="Inventario"/>
                                <p:selectOneMenu id="cmbinventario" value="#{tipoUsuarioBean.dao.chkinventario}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:panel>
                        <p:commandButton value="Aceptar" 
                                         actionListener="#{tipoUsuarioBean.confirmar()}"  
                                         update=":msg,:formTablaTipoUsuario:tipousuariotabla"/>

                        <p:commandButton value="Cancelar" 
                                         immediate="true"  
                                         oncomplete="PF('wvTipoUsuario').hide();"/>

                    </h:form>
                </p:dialog>
                <p:dialog header="Permisos"
                          widgetVar="wvPermiso"
                          id="igpermiso"
                          position="center bottom">
                    <h:form>
                        <p:panel>
                            <p:panelGrid columns="4">
                                <p:outputLabel for="cmbventa" value="Venta"/>
                                <p:selectOneMenu id="cmbventa" value="#{tipoUsuarioBean.dao.chkventa}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbcompra" value="Compra"/>
                                <p:selectOneMenu id="cmbcompra" value="#{tipoUsuarioBean.dao.chkcompra}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbusuario" value="Usuario"/>
                                <p:selectOneMenu id="cmbusuario" value="#{tipoUsuarioBean.dao.chkusuario}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbcaja" value="Caja"/>
                                <p:selectOneMenu id="cmbcaja" value="#{tipoUsuarioBean.dao.chkcaja}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbfactura" value="Factura"/>
                                <p:selectOneMenu id="cmbfactura" value="#{tipoUsuarioBean.dao.chkfactura}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>

                                <p:outputLabel for="cmbinventario" value="Inventario"/>
                                <p:selectOneMenu id="cmbinventario" value="#{tipoUsuarioBean.dao.chkinventario}" required="true">
                                    <f:selectItem itemLabel="No Permitido" itemValue="0"/>
                                    <f:selectItem itemLabel="Solo Visualizar" itemValue="1"/>
                                    <f:selectItem itemLabel="Permiso Total" itemValue="2"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:panel>
                    </h:form>
                </p:dialog>

            </ui:define>
        </ui:composition>
    </body>
</html>
